## 세미나: 헥사고날 아키텍처 도입 전략

**발표자:** Gemini
**날짜:** 2026-02-03

---

### 1. 헥사고날 아키텍처란 무엇인가?

헥사고날 아키텍처(Hexagonal Architecture), 또는 **포트와 어댑터(Ports and Adapters) 아키텍처**는 소프트웨어의 핵심 비즈니스 로직(도메인)을 외부 세계(UI, 데이터베이스, 외부 API 등)로부터 완전히 분리하고 보호하는 것을 목표로 하는 설계 패턴입니다.

*   **Hexagon (내부):** 애플리케이션의 순수한 비즈니스 로직과 도메인 모델이 위치합니다. 이 영역은 외부 기술이나 프레임워크에 대해 전혀 알지 못해야 합니다.
*   **Ports (포트):** 내부의 비즈니스 로직이 외부와 소통하기 위한 **'규격(인터페이스)'** 입니다.
    *   **Inbound Port:** 외부의 요청을 받아 비즈니스 로직을 실행하기 위한 포트 (예: `CreateOrderUseCase` 인터페이스).
    *   **Outbound Port:** 비즈니스 로직이 외부의 기능을 사용하기 위한 포트 (예: `OrderRepository` 인터페이스, `StockService` 인터페이스).
*   **Adapters (어댑터):** 포트라는 규격에 대한 **'구현체'** 입니다. 외부 세계와 실제 상호작용하는 기술적인 코드가 여기에 포함됩니다.
    *   **Primary/Driving Adapter:** 내부 로직을 호출하는 어댑터 (예: `@RestController`).
    *   **Secondary/Driven Adapter:** 내부 로직에 의해 호출되는 어댑터 (예: JPA를 이용한 Repository 구현체, REST API를 호출하는 외부 서비스 구현체).

---

### 2. 도입 시점: "지금" vs "나중에"

프로젝트의 어느 시점에 이 아키텍처를 도입할지는 중요한 전략적 결정입니다.

#### "나중에" 도입하는 경우 (1단계 완료 후 리팩토링)

*   **장점:**
    *   **빠른 프로토타이핑:** 일단 동작하는 기능을 빠르게 만드는 데 집중할 수 있습니다.
*   **단점:**
    *   **높은 리팩토링 비용:** 이미 특정 기술(예: Spring, JPA)과 강하게 결합된 코드를 분리하는 것은 매우 어렵고 많은 시간을 소모합니다.
    *   **잘못된 설계 고착화:** 기술 종속적인 코딩 방식이 프로젝트 전반에 퍼져나가 리팩토링을 더욱 힘들게 만듭니다.

#### "지금" 도입하는 경우 (현재 시점)

*   **장점:**
    *   **명확한 설계 유지:** 프로젝트 초기부터 비즈니스 로직과 외부 기술의 경계를 명확히 하여 유지보수성을 극대화합니다.
    *   **테스트 용이성:** 외부 환경 없이도 핵심 로직을 쉽고 빠르게 테스트할 수 있습니다.
    *   **유연성 및 확장성:** DB나 외부 API 같은 기술을 교체하더라도, 해당하는 어댑터만 교체하면 되므로 핵심 로직에 영향이 없습니다. 이는 우리가 최종적으로 구현할 **Saga 패턴**으로의 전환을 매우 용이하게 만듭니다.
*   **단점:**
    *   **초기 개발 속도:** 인터페이스와 구현체를 분리하는 등 초기 파일 구조 설정에 약간의 시간이 더 소요됩니다.

---

### 3. 최종 결정: "지금 바로 도입"

장기적인 관점에서 **유지보수성, 테스트 용이성, 확장성**을 고려할 때, **"지금 바로"** 헥사고날 아키텍처의 기본 구조를 도입하는 것이 훨씬 이득이 큽니다.

"재고/적립금 서비스"라는 새로운 외부 의존성이 추가되는 현재 시점이 아키텍처를 올바르게 설정할 **최적의 타이밍**입니다. 지금 구조를 잡아두면, 앞으로 추가될 모든 기능과 최종 목표인 Saga 패턴 전환까지 훨씬 더 깔끔하고 안정적으로 진행할 수 있습니다.

이제 이 결정에 따라 현재 프로젝트 구조를 헥사고날 아키텍처에 맞게 리팩토링하는 작업을 시작하겠습니다.
